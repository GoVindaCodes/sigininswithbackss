{"version":3,"sources":["assets/img/login-office.jpeg","assets/img/login-office-dark.jpeg","pages/Login.js","hooks/useLoginSubmit.js"],"names":["Login","t","useTranslation","onSubmit","register","handleSubmit","errors","loading","useLoginSubmit","dispatch","useContext","AdminContext","history","useHistory","location","useLocation","googleLoginAdmin","facebookLoginAdmin","AdminServices","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","getAnalytics","getAuth","useEffect","Email","localStorage","getItem","from","state","pathname","replace","notifySuccess","type","payload","email","_jsx","_Fragment","children","className","_jsxs","src","ImageLight","alt","ImageDark","LabelArea","label","InputArea","defaultValue","name","placeholder","Error","errorName","password","Button","disabled","to","onClick","async","provider","FacebookAuthProvider","user","signInWithPopup","console","log","accessToken","stsTokenManager","res","token","setItem","notifyError","error","ImFacebook","GoogleAuthProvider","result","tokenId","getIdToken","ImGoogle","Link","push","setLoading","useState","formState","useForm","_ref","phone","verifyEmail","role","loginAdmin","then","Cookies","set","JSON","stringify","expires","catch","err","response","data","message","registerAdmin","forgetPassword"],"mappings":"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","file":"static/js/30.d83d50ac.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/login-office.c7786a89.jpeg\";","export default __webpack_public_path__ + \"static/media/login-office-dark.c7786a89.jpeg\";","import React, { useContext, useEffect } from \"react\";\nimport { Button } from \"@windmill/react-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport Error from \"components/form/Error\";\nimport LabelArea from \"components/form/LabelArea\";\nimport InputArea from \"components/form/InputArea\";\nimport ImageLight from \"assets/img/login-office.jpeg\";\nimport ImageDark from \"assets/img/login-office-dark.jpeg\";\nimport useLoginSubmit from \"../hooks/useLoginSubmit\";\nimport { AdminContext } from 'context/AdminContext';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { notifyError, notifySuccess } from \"utils/toast\";\nimport { Link } from \"@react-pdf/renderer\";\nimport { ImFacebook, ImGoogle } from \"react-icons/im\";\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { getAuth, GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\nimport { FacebookAuthProvider } from \"firebase/auth\";\nimport AdminServices from \"services/AdminServices\";\n\nconst Login = () => {\n  const { t } = useTranslation();\n  const { onSubmit, register, handleSubmit, errors, loading } =\n    useLoginSubmit();\n\n  const { dispatch } = useContext(AdminContext);\n  const history = useHistory();\n  const location = useLocation();\n  const { googleLoginAdmin, facebookLoginAdmin } = AdminServices;\n  // Import the functions you need from the SDKs you need\n\n  // TODO: Add SDKs for Firebase products that you want to use\n  // https://firebase.google.com/docs/web/setup#available-libraries\n\n  // Your web app's Firebase configuration\n  // For Firebase JS SDK v7.20.0 and later, measurementId is optional\n  const firebaseConfig = {\n    apiKey: \"AIzaSyBGAVOqfuKYCJ8B3D42cI4JA7W-I0-rGr4\",\n    authDomain: \"ecomdaddyy.firebaseapp.com\",\n    projectId: \"ecomdaddyy\",\n    storageBucket: \"ecomdaddyy.appspot.com\",\n    messagingSenderId: \"932602306808\",\n    appId: \"1:932602306808:web:463676993d7d5ab81bdb0d\",\n    measurementId: \"G-YLF5X1P9RD\"\n  };\n\n  const app = initializeApp(firebaseConfig);\n  const analytics = getAnalytics(app);\n  const auth = getAuth();\n\n  const handleGoogleSignIn = async () => {\n    try {\n      const provider = new GoogleAuthProvider();\n      const result = await signInWithPopup(auth, provider);\n      console.log(\"Google sign-in successful:\", result);\n      const user = result.user;\n      const tokenId = await user.getIdToken();\n      // console.log(\"Google sign-in successful:\", user);\n      // console.log(\"Google sign-in successful:\", user.email);\n      // console.log(\"Google sign-in successful:\", user.accessToken);\n\n      const res = await googleLoginAdmin({ tokenId });\n      console.log(\"Google Response:\", res);\n      console.log(\"Google Resposnes:\", res);\n      if (res.token) {\n        notifySuccess('Logged in successfully');\n        dispatch({\n          type: 'USER_LOGIN',\n          payload: {\n            token: res.token\n          }\n        });\n        localStorage.setItem(\"email\", user.email);\n        history.replace('/');\n      } else {\n        notifyError('Failed to log in with Google');\n      }\n    } catch (error) {\n      console.error('Google sign-in error:', error);\n      notifyError('Failed to sign in with Google');\n    }\n  };\n\n\n\n  const handleFacebookSignIn = async () => {\n    try {\n      const provider = new FacebookAuthProvider();\n      const result = await signInWithPopup(auth, provider);\n      const user = result.user;\n      console.log(\"Facebook sign-in successful:\", user);\n\n      // Get Facebook access token\n      const accessToken = user.stsTokenManager.accessToken; // Accessing the access token correctly\n\n      // Call your backend API to handle the Facebook sign-in\n      const res = await facebookLoginAdmin({ accessToken });\n      console.log(\"Facebook Response:\", res);\n\n      if (res.token) {\n        // If your backend returns a token, handle it accordingly\n        notifySuccess('Logged in successfully');\n        dispatch({\n          type: 'USER_LOGIN',\n          payload: {\n            token: res.token\n          }\n        });\n        localStorage.setItem(\"email\", res.email);\n        history.replace('/');\n      } else {\n        notifyError('Failed to log in with Facebook');\n      }\n    } catch (error) {\n      console.error('Facebook sign-in error:', error);\n      notifyError('Failed to sign in with Facebook');\n    }\n  };\n\n  // Added By : Govinda \n\n  // Explanation : before it was using synchronous userstatus() function which did not allowed sideffects and rendering properly now using useeffect allows decoupling of codes and allows sideeffects like rendering a differenct route when location.state has the specific route add your Logic accordingly if want changes in future\n\n  useEffect(() => {\n    const Email = localStorage.getItem(\"email\");\n    if (Email) {\n      const { from } = location.state || { from: { pathname: \"/\" } };\n      history.replace(from);\n      notifySuccess('Welcome back!');\n      dispatch({ type: 'USER_LOGIN', payload: { email: Email } });\n    }\n  }, [dispatch, history, location.state]);\n\n  // const handleLogin = async (data) => {\n  //   await onSubmit(data);\n  //   const { from } = location.state || { from: { pathname: \"/\" } };\n  //   history.replace(from);\n  // };\n\n  return (\n    <>\n      <div className=\"flex items-center min-h-screen p-6 bg-gray-50 dark:bg-gray-900\">\n        <div className=\"flex-1 h-full max-w-4xl mx-auto overflow-hidden bg-white rounded-lg shadow-xl dark:bg-gray-800\">\n          <div className=\"flex flex-col overflow-y-auto md:flex-row\">\n            <div className=\"h-32 md:h-auto md:w-1/2\">\n              <img\n                aria-hidden=\"true\"\n                className=\"object-cover w-full h-full dark:hidden\"\n                src={ImageLight}\n                alt=\"Office\"\n              />\n              <img\n                aria-hidden=\"true\"\n                className=\"hidden object-cover w-full h-full dark:block\"\n                src={ImageDark}\n                alt=\"Office\"\n              />\n            </div>\n            <main className=\"flex items-center justify-center p-6 sm:p-12 md:w-1/2\">\n              <div className=\"w-full\">\n                <h1 className=\"mb-6 text-2xl font-semibold text-gray-700 dark:text-gray-200\">\n                  Login\n                </h1>\n                <form onSubmit={handleSubmit(onSubmit)}>\n                  <LabelArea label=\"Email\" />\n                  <InputArea\n                    register={register}\n                    // defaultValue=\"admin@gmail.com\"\n                    defaultValue=\"\"\n                    label=\"Email\"\n                    name=\"email\"\n                    type=\"email\"\n                    // placeholder=\"john@doe.com\"\n                    placeholder=\"Enter Your Email.....\"\n                  />\n                  <Error errorName={errors.email} />\n                  <div className=\"mt-6\"></div>\n                  <LabelArea label=\"Password\" />\n                  <InputArea\n                    register={register}\n                    // defaultValue=\"123456789\"\n                    defaultValue=\"\"\n                    label=\"Password\"\n                    name=\"password\"\n                    type=\"password\"\n                    placeholder=\"***************\"\n                  />\n                  <Error errorName={errors.password} />\n\n                  <Button\n                    disabled={loading}\n                    type=\"submit\"\n                    className=\"mt-4 h-12 w-full\"\n                    to=\"/dashboard\"\n                  >\n                    {t(\"LoginTitle\")}\n                  </Button>\n                  <hr className=\"my-10\" />\n                  <button\n                    className=\"text-sm inline-flex items-center cursor-pointer transition ease-in-out duration-300 font-semibold font-serif text-center justify-center rounded-md focus:outline-none text-gray-700 bg-gray-100 shadow-sm my-2  md:px-2 lg:px-3 py-4 md:py-3.5 lg:py-4 hover:text-white hover:bg-red-500 h-11 md:h-12 w-full\"\n                    onClick={handleFacebookSignIn}\n                  >\n                    <ImFacebook className=\"w-4 h-4 mr-2\" />{\" \"}\n                    <span className=\"ml-2\">{t(\"LoginWithFacebook\")}</span>\n                  </button>\n\n                  {/* <button\n                    // disabled\n                    className=\"text-sm inline-flex items-center cursor-pointer transition ease-in-out duration-300 font-semibold font-serif text-center justify-center rounded-md focus:outline-none text-gray-700 bg-gray-100 shadow-sm my-2 md:px-2 lg:px-3 py-4 md:py-3.5 lg:py-4 hover:text-white hover:bg-blue-600 h-11 md:h-12 w-full mr-2\"\n                  >\n                    <ImFacebook className=\"w-4 h-4 mr-2\" />{\" \"}\n                    <span className=\"ml-2\"> {t(\"LoginWithFacebook\")} </span>\n                  </button> */}\n                  <button\n                    // disabled\n                    className=\"text-sm inline-flex items-center cursor-pointer transition ease-in-out duration-300 font-semibold font-serif text-center justify-center rounded-md focus:outline-none text-gray-700 bg-gray-100 shadow-sm my-2  md:px-2 lg:px-3 py-4 md:py-3.5 lg:py-4 hover:text-white hover:bg-red-500 h-11 md:h-12 w-full\"\n                    onClick={handleGoogleSignIn}\n                  >\n                    <ImGoogle className=\"w-4 h-4 mr-2\" />{\" \"}\n                    <span className=\"ml-2\">{t(\"LoginWithGoogle\")}</span>\n                  </button>\n                </form>\n\n                <p className=\"mt-4\">\n                  <Link\n                    className=\"text-sm font-medium text-green-500 dark:text-green-400 hover:underline\"\n                    to=\"/forgot-password\"\n                  >\n                    {t(\"ForgotPassword\")}\n                  </Link>\n                </p>\n                <p className=\"mt-1\">\n                  <Link\n                    className=\"text-sm font-medium text-green-500 dark:text-green-400 hover:underline\"\n                    to=\"/signup\"\n                  >\n                    {t(\"CreateAccountTitle\")}\n                  </Link>\n                </p>\n                {/* Added By : Govinda 4/23/2024  */}\n                {/* For some Reasons link was not working so for it has been changed as button from my side  */}\n                <p className=\"mt-4\">\n                  <button\n                    className=\"text-sm font-medium text-green-500 dark:text-green-400 hover:underline\"\n                    onClick={() => history.push(\"/forgot-password\")}\n                  >\n                    {t(\"ForgotPassword\")}\n                  </button>\n                </p>\n                <p className=\"mt-1\">\n                  <button\n                    className=\"text-sm font-medium text-green-500 dark:text-green-400 hover:underline\"\n                    onClick={() => history.push(\"/signup\")}\n                  >\n                    {t(\"CreateAccountTitle\")}\n                  </button>\n                </p>\n              </div>\n            </main>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Login;\n\n\n\n\n\n// import React, { useContext } from \"react\";\n// // import { Link } from \"react-router-dom\";\n// import { Button } from \"@windmill/react-ui\";\n// // import { ImFacebook, ImGoogle } from \"react-icons/im\";\n// import { useTranslation } from \"react-i18next\";\n// import Error from \"components/form/Error\";\n// import LabelArea from \"components/form/LabelArea\";\n// import InputArea from \"components/form/InputArea\";\n// import ImageLight from \"assets/img/login-office.jpeg\";\n// import ImageDark from \"assets/img/login-office-dark.jpeg\";\n// import useLoginSubmit from \"../hooks/useLoginSubmit\";\n// import { AdminContext } from 'context/AdminContext';\n// import { useHistory } from 'react-router-dom';\n// import { notifySuccess } from \"utils/toast\";\n\n// const Login = () => {\n//   const { t } = useTranslation();\n//   const { onSubmit, register, handleSubmit, errors, loading } =\n//     useLoginSubmit();\n\n//   const { dispatch } = useContext(AdminContext)\n//   const history = useHistory();\n//   let Email = localStorage.getItem(\"email\");\n//   const userStatus = () => {\n\n//     if (Email) {\n//       history.replace('/');\n//       notifySuccess('Welcome back!');\n//       dispatch({ type: 'USER_LOGIN', payload: { email: Email } });\n\n//     }\n//     else {\n//       return true;\n//     }\n//   }\n//   return (\n//     userStatus()\n//       ?\n//       <>\n//         <div className=\"flex items-center min-h-screen p-6 bg-gray-50 dark:bg-gray-900\">\n//           <div className=\"flex-1 h-full max-w-4xl mx-auto overflow-hidden bg-white rounded-lg shadow-xl dark:bg-gray-800\">\n//             <div className=\"flex flex-col overflow-y-auto md:flex-row\">\n//               <div className=\"h-32 md:h-auto md:w-1/2\">\n//                 <img\n//                   aria-hidden=\"true\"\n//                   className=\"object-cover w-full h-full dark:hidden\"\n//                   src={ImageLight}\n//                   alt=\"Office\"\n//                 />\n//                 <img\n//                   aria-hidden=\"true\"\n//                   className=\"hidden object-cover w-full h-full dark:block\"\n//                   src={ImageDark}\n//                   alt=\"Office\"\n//                 />\n//               </div>\n//               <main className=\"flex items-center justify-center p-6 sm:p-12 md:w-1/2\">\n//                 <div className=\"w-full\">\n//                   <h1 className=\"mb-6 text-2xl font-semibold text-gray-700 dark:text-gray-200\">\n//                     Login\n//                   </h1>\n//                   <form onSubmit={handleSubmit(onSubmit)}>\n//                     <LabelArea label=\"Email\" />\n//                     <InputArea\n//                       register={register}\n//                       defaultValue=\"admin@gmail.com\"\n//                       label=\"Email\"\n//                       name=\"email\"\n//                       type=\"email\"\n//                       placeholder=\"john@doe.com\"\n//                     />\n//                     <Error errorName={errors.email} />\n//                     <div className=\"mt-6\"></div>\n//                     <LabelArea label=\"Password\" />\n//                     <InputArea\n//                       register={register}\n//                       defaultValue=\"12345678\"\n//                       label=\"Password\"\n//                       name=\"password\"\n//                       type=\"password\"\n//                       placeholder=\"***************\"\n//                     />\n//                     <Error errorName={errors.password} />\n\n//                     <Button\n//                       disabled={loading}\n//                       type=\"submit\"\n//                       className=\"mt-4 h-12 w-full\"\n//                       to=\"/dashboard\"\n//                     >\n//                       {t(\"LoginTitle\")}\n//                     </Button>\n//                     <hr className=\"my-10\" />\n//                     {/* <button\n//                     disabled\n//                     className=\"text-sm inline-flex items-center cursor-pointer transition ease-in-out duration-300 font-semibold font-serif text-center justify-center rounded-md focus:outline-none text-gray-700 bg-gray-100 shadow-sm my-2 md:px-2 lg:px-3 py-4 md:py-3.5 lg:py-4 hover:text-white hover:bg-blue-600 h-11 md:h-12 w-full mr-2\"\n//                   >\n//                     <ImFacebook className=\"w-4 h-4 mr-2\" />{\" \"}\n//                     <span className=\"ml-2\"> {t(\"LoginWithFacebook\")} </span>\n//                   </button>\n//                   <button\n//                     disabled\n//                     className=\"text-sm inline-flex items-center cursor-pointer transition ease-in-out duration-300 font-semibold font-serif text-center justify-center rounded-md focus:outline-none text-gray-700 bg-gray-100 shadow-sm my-2  md:px-2 lg:px-3 py-4 md:py-3.5 lg:py-4 hover:text-white hover:bg-red-500 h-11 md:h-12 w-full\"\n//                   >\n//                     <ImGoogle className=\"w-4 h-4 mr-2\" />{\" \"}\n//                     <span className=\"ml-2\">{t(\"LoginWithGoogle\")}</span>\n//                   </button> */}\n//                   </form>\n\n//                   {/* <p className=\"mt-4\">\n//                   <Link\n//                     className=\"text-sm font-medium text-green-500 dark:text-green-400 hover:underline\"\n//                     to=\"/forgot-password\"\n//                   >\n//                     {t(\"ForgotPassword\")}\n//                   </Link>\n//                 </p>\n//                 <p className=\"mt-1\">\n//                   <Link\n//                     className=\"text-sm font-medium text-green-500 dark:text-green-400 hover:underline\"\n//                     to=\"/signup\"\n//                   >\n//                     {t(\"CreateAccountTitle\")}\n//                   </Link>\n//                 </p> */}\n//                 </div>\n//               </main>\n//             </div>\n//           </div>\n//         </div>\n//       </>\n//       : <></>\n//   );\n// };\n\n// export default Login;\n","// import Cookies from 'js-cookie';\n// import { useContext, useState } from 'react';\n// import { useForm } from 'react-hook-form';\n// import { useHistory, useLocation } from 'react-router-dom';\n// import { AdminContext } from 'context/AdminContext';\n// import AdminServices from 'services/AdminServices';\n// import { notifyError, notifySuccess } from 'utils/toast';\n\n// const useLoginSubmit = () => {\n//   const [loading, setLoading] = useState(false);\n//   const { dispatch } = useContext(AdminContext);\n//   const history = useHistory();\n//   const location = useLocation();\n//   const {\n//     register,\n//     handleSubmit,\n//     formState: { errors },\n//   } = useForm();\n\n//   const onSubmit = ({ name, email, verifyEmail, password, role }) => {\n//     setLoading(true);\n//     const cookieTimeOut = 0.5;\n\n//     if (location.pathname === '/login') {\n//       AdminServices.loginAdmin({ email, password })\n//         .then((res) => {\n//           if (res) {\n//             console.log('Login response:', res);\n//             Cookies.set('adminInfo', JSON.stringify(res), {\n//               expires: cookieTimeOut,\n//             });\n//           }\n//         })\n//         .catch((err) => {\n//           console.error('Login error:', err);\n//           notifyError(err ? err.response.data.message : err.message);\n//           setLoading(false);\n//         });\n//       setLoading(false);\n//       notifySuccess('Login Success!');\n//       dispatch({ type: 'USER_LOGIN', payload: { email: email } });\n//       localStorage.setItem(\"email\", email)\n//       history.replace('/');\n//     }\n\n//     if (location.pathname === '/signup') {\n//       AdminServices.registerAdmin({ name, email, password, role })\n//         .then((res) => {\n//           if (res) {\n//             setLoading(false);\n//             notifySuccess('Register Success!');\n//             dispatch({ type: 'USER_LOGIN', payload: res });\n//             Cookies.set('adminInfo', JSON.stringify(res), {\n//               expires: cookieTimeOut,\n//             });\n//             history.replace('/');\n//           }\n//         })\n//         .catch((err) => {\n//           notifyError(err ? err.response.data.message : err.message);\n//           setLoading(false);\n//         });\n//     }\n\n//     if (location.pathname === '/forgot-password') {\n//       AdminServices.forgetPassword({ verifyEmail })\n//         .then((res) => {\n//           setLoading(false);\n//           notifySuccess(res.message);\n//         })\n//         .catch((err) => {\n//           setLoading(false);\n//           notifyError(err ? err.response.data.message : err.message);\n//         });\n//     }\n//   };\n//   return {\n//     onSubmit,\n//     register,\n//     handleSubmit,\n//     errors,\n//     loading,\n//   };\n// };\n\n// export default useLoginSubmit;\n\n\n\n// just trying to make user stay at login when its correct from tokens \nimport Cookies from 'js-cookie';\nimport { useContext, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { AdminContext } from 'context/AdminContext';\nimport AdminServices from 'services/AdminServices';\nimport { notifyError, notifySuccess } from 'utils/toast';\n\nconst useLoginSubmit = () => {\n  const [loading, setLoading] = useState(false);\n  const { dispatch } = useContext(AdminContext);\n  const history = useHistory();\n  const location = useLocation();\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm();\n\n  const onSubmit = ({ name, email, phone, verifyEmail, password, role }) => {\n    setLoading(true);\n    const cookieTimeOut = 0.5;\n\n    if (location.pathname === '/login') {\n      AdminServices.loginAdmin({ email, password })\n        .then((res) => {\n          if (res && res.token) {\n            console.log('Login response:', res);\n            Cookies.set('adminInfo', JSON.stringify(res), {\n              expires: cookieTimeOut,\n            });\n            setLoading(false);\n            notifySuccess('Login Success!');\n            // dispatch({ type: 'USER_LOGIN', payload: { email: email } });\n            dispatch({ type: 'USER_LOGIN', payload: { token: res.token } });\n            localStorage.setItem(\"email\", email)\n            history.replace('/');\n          }\n        })\n        .catch((err) => {\n          console.error('Login error:', err);\n          notifyError(err ? err.response.data.message : err.message);\n          setLoading(false);\n        });\n    }\n\n    if (location.pathname === '/signup') {\n      AdminServices.registerAdmin({ name, email, phone, password, role })\n        .then((res) => {\n          if (res) {\n            setLoading(false);\n            notifySuccess('Register Success!');\n            dispatch({ type: 'USER_LOGIN', payload: res });\n            Cookies.set('adminInfo', JSON.stringify(res), {\n              expires: cookieTimeOut,\n            });\n            history.replace('/');\n          }\n        })\n        .catch((err) => {\n          notifyError(err ? err.response.data.message : err.message);\n          setLoading(false);\n        });\n    }\n    // Added by: Govinda 25/4/2024\n    if (location.pathname === '/forgot-password') {\n      console.log('Forgot Password form submitted:', verifyEmail);\n\n      AdminServices.forgetPassword({ verifyEmail })\n        .then((res) => {\n          setLoading(false);\n          console.log('Password reset response:', res);\n          notifySuccess(res.message);\n        })\n        .catch((err) => {\n          setLoading(false);\n          console.error('Password reset error:', err);\n          notifyError(err ? err.response.data.message : err.message);\n        });\n    }\n  };\n  return {\n    onSubmit,\n    register,\n    handleSubmit,\n    errors,\n    loading,\n  };\n};\n\nexport default useLoginSubmit;\n"],"sourceRoot":""}